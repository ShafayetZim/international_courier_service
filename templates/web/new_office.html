{% extends "base.html" %}
{% load static %}
{% load crispy_forms_tags %}
{% block content %}

<!--  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">-->
<!--  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>-->
<!--  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>-->
<div class="container p-4">
    <div class="row">
        <div class="col-lg-12 col-12 layout-spacing">
            <div class="statbox widget box box-shadow">
                <div class="widget-header">
                    <div class="row">
                            <h4>Create New Office</h4>
                    </div>
                </div>
                <div class="widget-content widget-content-area">

                    <form method="post" id="myform" >
                        {% csrf_token %}
                        <div class="row mb-2">
                            <div class="col-6">
                                <div class="form-group">
                                    {{ office_form.name|as_crispy_field }}
                                </div>
                            </div>

                            <div class="col-6">
                                <div class="form-group">
                                    {{ office_form.address|as_crispy_field }}
                                </div>
                            </div>
                        </div>

                        <div class="row mb-2">
                            <div class="col-6">
                                <div class="form-group">
                                    {{ office_form.phone|as_crispy_field }}
                                </div>
                            </div>

                            <div class="col-6">
                                <div class="form-group">
                                    {{ office_form.email|as_crispy_field }}
                                </div>
                            </div>

                        </div>

                        <div class="row mb-4">
                            <div class="col">
                                {{ office_form.time|as_crispy_field }}
                            </div>

                            <div class="col">
                                <div class="form-group">
                                    {{ office_form.date|as_crispy_field }}
                                </div>
                            </div>
                        </div>

                        <div class="text-center">
                            <input type="submit" class="btn btn-primary">
                        </div>
<!--                        <button type="button" class="btn mt-5 mb-5 rounded-pill btn-lg btn-custom btn-block text-uppercase" data-toggle="modal" data-target="#myModal">Preview</button>-->

                    </form>

                </div>

                </form>

<!--                <div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">-->
<!--                    <div class="modal-dialog" role="document">-->
<!--                       <div class="modal-content">-->
<!--                          <div class="modal-header">-->
<!--                             <h5 class="modal-title" id="exampleModalLabel">Modal title</h5>-->
<!--                             <button type="button" class="close" data-dismiss="modal" aria-label="Close">-->
<!--                             <span aria-hidden="true">&times;</span>-->
<!--                             </button>-->
<!--                          </div>-->
<!--                          <div class="modal-body">-->
<!--                             <div id="formPreview">-->
<!--                             </div>-->
<!--                          </div>-->
<!--                          <div class="modal-footer">-->
<!--                             <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>-->
<!--                             <button id="formSubmit" type="button" class="btn btn-primary">Submit</button>-->
<!--                          </div>-->
<!--                       </div>-->
<!--                    </div>-->
<!--                 </div>-->

                <div class="modal fade" id="myModal" role="dialog">
                            <div class="modal-dialog">
                                <!-- Modal content-->
                                <div class="modal-content">
                                    <div class="modal-header">
                                        <h4 class="modal-title">Preview Origin Country</h4>
                                        <button type="button" class="close" data-dismiss="modal">&times;
                                        </button>
                                    </div>
                                    <div class="modal-body">
                                        <div id="formPreview">
                                    </div>
                                    <div class="modal-footer">
                                        <button type="button" class="btn btn-dark" data-dismiss="modal">
                                            Cancel
                                        </button>
                                        <button id="formSubmit" type="button" class="btn btn-primary">Submit</button>
<!--                                        <a href=""-->
<!--                                           class="btn btn-danger">Delete</a>-->
                                    </div>
                                </div>

                            </div>
                        </div>




      </div>

            </div>
        </div>
    </div>
</div>

<script>
         $('#myModal').on('shown.bs.modal', function () {

             //1- Get the value from form
             var table = '<table>'
             $("#myform input").each(function(){
                    console.log($(this).attr('name'), $(this).val())
                 table += '<tr><td>'+$(this).attr('name')+'</td><td>'+$(this).val()+'</td></tr>'
             })

             table += '</table>'

             //2- Set the value in Modal
             $('#formPreview').html(table)

           })

           $('#formSubmit').on('click', function (){
                $("#myform").submit();
           })
</script>

<!--<script>-->
<!--const previewButton = document.querySelector('.myform button[type"button"]');-->
<!--         previewButton.addeventListener('click', () => {-->

<!--             //1- Get the value from form-->
<!--             var table = '<table>'-->
<!--             $("#myform input").each(function(){-->
<!--                    console.log($(this).attr('name'), $(this).val())-->
<!--                 table += '<tr><td>'+$(this).attr('name')+'</td><td>'+$(this).val()+'</td></tr>'-->
<!--             })-->

<!--             table += '</table>'-->

<!--             //2- Set the value in Modal-->
<!--             window.alert($('#formPreview').html(table))-->

<!--           })-->

<!--           $('#formSubmit').on('click', function (){-->
<!--                $("#myform").submit();-->
<!--           })-->
<!--</script>-->


{% endblock content %}